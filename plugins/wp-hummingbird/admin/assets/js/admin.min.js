!function(a){"use strict";var b={modules:[],init:function(){function b(a){var b,c,d,e=a.find(".wphb-score-result-label"),f=parseInt(e.text(),10)||100,g=a.find(".wphb-score-graph-result");b=g.attr("r"),c=Math.PI*(2*b),f<0&&(f=0),f>100&&(f=100),d=(100-f)/100*c,g.css({strokeDashoffset:d})}function c(){a(".wphb-performance-report-overall-score").each(function(){b(a(this))}),a(".wphb-performance-report-current-score").each(function(){b(a(this))}),a(".wphb-performance-report-item-score").each(function(){b(a(this))})}window.register_events_performance=function(){setTimeout(c,500)},a(function(){setTimeout(c,500)})},initModule:function(a){return this.hasOwnProperty(a)?(this.modules[a]=this[a].init(),this.modules[a]):{}},getModule:function(a){return"undefined"!=typeof this.modules[a]?this.modules[a]:this.initModule(a)}};b.utils={membershipModal:{open:function(){a("#wphb-upgrade-membership-modal-link").trigger("click")}}},b.notices={init:function(){a("a.wphb-dismiss").click(function(b){b.preventDefault();a(this).data("id"),a(this).data("nonce");a(this).parent(".error").hide()})}},window.WPHB_Admin=b}(jQuery),function(a){"use strict";WPHB_Admin.performance={module:"performance",iteration:0,init:function(){var b=this;wphbPerformanceStrings&&(this.strings=wphbPerformanceStrings),this.$runTestButton=a("#run-performance-test"),a(".performance-report-table").off("click","button"),a(".performance-report-table").on("click","tr.wphb-performance-report-item",function(b){b.preventDefault();var c=a(this).closest(".wphb-performance-report-item"),d=c.nextUntil(".wphb-performance-report-item");d.toggleClass("wphb-performance-report-item-additional-content-opened"),d.hasClass("wphb-performance-report-item-additional-content-opened")?c.addClass("wphb-performance-report-item-opened"):c.removeClass("wphb-performance-report-item-opened")}),this.$runTestButton.length&&this.$runTestButton.click(function(c){c.preventDefault(),a(this).attr("disabled",!0),b.performanceTest(b.strings.finishedTestURLsLink)});var c=window.location.hash;if(c){var d=a(c);d.length&&d.find(".trigger-additional-content").trigger("click")}return this},performanceTest:function(b){var c=this;"undefined"==typeof b&&(b=!1),a.ajax({url:ajaxurl,data:{action:"wphb_ajax",method:"POST",wphb_nonce:c.strings.performanceTestNonce,nonce_name:"wphb-welcome-performance-test",module:c.module,module_action:"performance_test"}}).success(function(a){var d=a.success;d?b&&(window.location=b):window.setTimeout(function(){c.performanceTest(b)},1e4)})}}}(jQuery),function(a){WPHB_Admin.chart={module:"chart",cache:[],google:null,init:function(){var b=this;return wphbMinificationStrings&&(b.strings=wphbMinificationStrings),b.google=google,b.google.load("visualization","1.1",{packages:["sankey"],callback:function(){}}),a(".wphb-chart-selector").change(function(){var c=a(this).val(),d=a(this).data("type"),e=a("#output-spinner-"+d);e.css("visibility","visible"),a.ajax({url:ajaxurl,data:{action:b.module+"_switch_chart_area",method:"POST",wphb_nonce:b.strings.chartNonce,data:{area:c}}}).success(function(a){"undefined"!=typeof a.data&&(b.reDraw(a.data.chartData,a.data.sourcesNumber,d),e.css("visibility","hidden"))})}),this},reDraw:function(b,c,d){var e=a("#sankey_multiple_"+d);e.length&&(e.css("height",50*c[d]),this.draw(b[d],"sankey_multiple_"+d))},draw:function(b,c){var d=new this.google.visualization.DataTable;d.addColumn("string","From"),d.addColumn("string","To"),d.addColumn("number","Files"),d.addRows(b);var e={width:"100%",sankey:{node:{label:{fontName:"Open Sans",fontSize:14,color:"#333",bold:!1,italic:!1,stroke:"black",strokeWidth:1},labelPadding:6,nodePadding:30,width:20},link:{colorMode:"source",color:{fill:"#E3E3E3",fillOpacity:1,stroke:"black",strokeWidth:0}}}},f=new this.google.visualization.Sankey(document.getElementById(c));f.draw(d,e),a(window).resize(function(){f.draw(d,e)})}}}(jQuery),function(a){WPHB_Admin.gzip={module:"gzip",selectedServer:"",$serverSelector:null,$serverInstructions:[],init:function(){var b=this;wphbGZipStrings&&(b.strings=wphbGZipStrings),this.$serverSelector=a("#wphb-server-type"),this.selectedServer=this.$serverSelector.val();var c=a(".wphb-server-instructions");return c.each(function(c,d){b.$serverInstructions[a(this).data("server")]=a(this)}),this.showServerInstructions(this.selectedServer),this.$serverSelector.change(function(){var c=a(this).val();b.hideCurrentInstructions(),b.showServerInstructions(c),b.selectedServer=c}),a("#toggle-apache-instructions").click(function(b){b.preventDefault(),a(".apache-instructions").toggle()}),this},hideCurrentInstructions:function(){var a=this.selectedServer;this.$serverInstructions[a]&&this.$serverInstructions[a].hide()},showServerInstructions:function(b){"undefined"!=typeof this.$serverInstructions[b]&&this.$serverInstructions[b].show(),"apache"==b?a("#enable-cache-wrap").show():a("#enable-cache-wrap").hide()}}}(jQuery),function(a){WPHB_Admin.caching={module:"caching",selectedServer:"",$serverSelector:null,$serverInstructions:[],$expirySelectors:[],$snippets:[],init:function(){var b=this,c=a("#wphb-box-caching-enable"),d=c.find(".box-content"),e=d.find(".spinner"),f=c.find(".box-footer");wphbCachingStrings&&(b.strings=wphbCachingStrings),this.$serverSelector=a("#wphb-server-type"),this.selectedServer=this.$serverSelector.val(),b.$snippets.apache=a("#wphb-code-snippet-apache pre").first(),b.$snippets.nginx=a("#wphb-code-snippet-nginx pre").first();var g=a(".wphb-server-instructions");g.each(function(c,d){b.$serverInstructions[a(this).data("server")]=a(this)});var h=a(".wphb-expiry-select");return h.each(function(c,g){var h=a(this).data("type");h&&a(this).change(function(){d.find(".wphb-content").hide(),f.hide(),e.fadeIn(),a(".wphb-notice").hide(),function(c){var d=a(c).val();a.ajax({url:ajaxurl,method:"POST",data:{action:"wphb_ajax",wphb_nonce:b.strings.setExpirationNonce,nonce_name:"wphb-set-expiration",module:b.module,module_action:"set_expiration",data:{type:h,value:d}}}).done(function(){b.reloadSnippets()})}(this)})}),this.showServerInstructions(this.selectedServer),this.$serverSelector.change(function(){var c=a(this).val();b.hideCurrentInstructions(),b.showServerInstructions(c),b.setServer(c),b.selectedServer=c}),a("#toggle-apache-instructions").click(function(b){b.preventDefault(),a(".apache-instructions").slideToggle()}),this},setServer:function(b){var c=this;a.ajax({url:ajaxurl,method:"POST",data:{action:"wphb_ajax",wphb_nonce:c.strings.setServerNonce,nonce_name:"wphb-set-server",module:c.module,module_action:"set_server_type",data:{type:b}}})},hideCurrentInstructions:function(){var a=this.selectedServer;this.$serverInstructions[a]&&this.$serverInstructions[a].hide()},showServerInstructions:function(b){"undefined"!=typeof this.$serverInstructions[b]&&this.$serverInstructions[b].show(),"apache"==b?a("#enable-cache-wrap").show():a("#enable-cache-wrap").hide()},reloadSnippets:function(){var b=this,c=!1;for(var d in b.$snippets)b.$snippets.hasOwnProperty(d)&&a.ajax({url:ajaxurl,method:"POST",data:{action:"wphb_ajax",wphb_nonce:b.strings.setExpirationNonce,nonce_name:"wphb-set-expiration",module:b.module,module_action:"reload_snippet",data:{type:d}}}).success(function(d){if(d.success&&!c){if(b.$snippets[d.data.type].text(d.data.code),d.data.type!=b.selectedServer)return;"apache"==d.data.type&&d.data.updatedFile?(a("#wphb-notice-code-snippet-htaccess-updated").show(),location.href=b.strings.recheckURL+"&caching-updated=true"):"apache"==d.data.type&&b.strings.cacheEnabled&&!d.data.updatedFile?(a("#wphb-notice-code-snippet-htaccess-error").show(),location.href=b.strings.htaccessErrorURL):(a("#wphb-notice-code-snippet-updated").show(),location.href=b.strings.recheckURL+"&caching-updated=true")}})}}}(jQuery),function(a){"use strict";WPHB_Admin.minification={strings:null,$checkFilesButton:null,$checkFilesResultsContainer:null,module:"minification",checkURLSList:null,checkedURLS:0,$spinner:null,init:function(){var b=this;wphbMinificationStrings&&(b.strings=wphbMinificationStrings),this.$checkFilesButton=a("#check-files"),this.$disableMinification=a("#wphb-disable-minification"),this.$spinner=a(".spinner"),this.$checkFilesButton.length&&this.$checkFilesButton.click(function(c){c.preventDefault(),a(this).attr("disabled",!0),b.checkFiles(b.strings.finishedCheckURLsLink)}),a(".wphb-discard").click(function(a){return a.preventDefault(),confirm(b.strings.discardAlert)&&location.reload(),!1}),a("table.wphb-enqueued-files input, #wphb-minification-filter-block-bulk input").on("change",function(){a(".wphb-discard").attr("disabled",!1)}),this.$disableMinification.change(function(){var c=a(this).is(":checked");b.$spinner.css("visibility","visible"),b.timer&&c&&(clearTimeout(b.timer),b.$spinner.css("visibility","hidden")),b.timer=setTimeout(function(){a.ajax({url:ajaxurl,method:"POST",data:{action:"wphb_ajax",wphb_nonce:b.strings.toggleMinificationNonce,nonce_name:"wphb-toggle-minification",module:b.module,module_action:"toggle_minification",data:{value:c}}}).always(function(){location.reload()})},3e3)});var c=new WPHB_Admin.minification.RowsCollection,d=a(".wphb-minification-row");return d.each(function(b,d){var e;e=a(d).data("filter-secondary")?new WPHB_Admin.minification.Row(a(d),a(d).data("filter"),a(d).data("filter-secondary")):new WPHB_Admin.minification.Row(a(d),a(d).data("filter")),c.push(e)}),a("#wphb-s").keyup(function(){c.addFilter(a(this).val(),"primary"),c.applyFilters()}),a("#wphb-secondary-filter").change(function(){c.addFilter(a(this).val(),"secondary"),c.applyFilters()}),a(".filter-toggles").change(function(){var b=a(this),d=b.data("toggles"),e=b.prop("checked"),f=c.getVisibleItems();for(var g in f)f[g].change(d,e)}),a('input[name="filter-position"]').change(function(){var b=a(this),d=b.data("toggles"),e=b.prop("checked"),f=c.getVisibleItems();for(var g in f)f[g].setPosition(d,e)}),this},checkFiles:function(b){var c=this;"undefined"==typeof b&&(b=!1),c.minificationStarted?a.ajax({url:ajaxurl,data:{action:"wphb_ajax",method:"POST",wphb_nonce:c.strings.checkFilesNonce,nonce_name:"wphb-minification-check-files",module:c.module,module_action:"check_step"}}).always(function(a){return"undefined"==typeof a.data.finished?void(window.location.href=b):a.data.finished&&b?void(window.location.href=b):void(a.data.finished||window.setTimeout(function(){c.checkFiles(b)},3e3))}):a.ajax({url:ajaxurl,data:{action:"wphb_ajax",method:"POST",wphb_nonce:c.strings.checkFilesNonce,nonce_name:"wphb-minification-check-files",module:c.module,module_action:"start_check"}}).success(function(){c.minificationStarted=!0,c.checkFiles(b)})}},WPHB_Admin.minification.Row=function(a,b,c){var d=a,e=b.toLowerCase(),f=!1,g=!0,h=d.find(".toggle-include"),i=d.find(".toggle-combine"),j=d.find(".toggle-minify"),k=d.find(".toggle-position-header"),l=d.find(".toggle-position-default"),m=d.find(".toggle-position-footer");return c&&(f=c.toLowerCase()),{hide:function(){d.addClass("out-of-filter"),g=!1},show:function(){d.removeClass("out-of-filter"),g=!0},getElement:function(){return d},getFilter:function(){return e},matchFilter:function(a){return""===a||(a=a.toLowerCase(),e.search(a)>-1)},matchSecondaryFilter:function(a){return""===a||!!f&&(a=a.toLowerCase(),f==a)},isVisible:function(){return g},change:function(a,b){switch(a){case"minify":j.prop("checked",b);break;case"combine":i.prop("checked",b);break;case"include":h.prop("checked",b)}},setPosition:function(a,b){switch(a){case"header":k.prop("checked",b);break;case"default":l.prop("checked",b);break;case"footer":m.prop("checked",b)}}}},WPHB_Admin.minification.RowsCollection=function(){var a=[],b="",c="";return{push:function(b){"object"==typeof b&&a.push(b)},getItems:function(){return a},getItem:function(b){return!!a[b]&&a[b]},getVisibleItems:function(){var b=[];for(var c in a)a[c].isVisible()&&b.push(a[c]);return b},addFilter:function(a,d){"secondary"===d?c=a:b=a},applyFilters:function(){for(var d in a)a[d]&&(a[d].matchFilter(b)&&a[d].matchSecondaryFilter(c)?a[d].show():a[d].hide())}}}}(jQuery),function(a){WPHB_Admin.dashboard={module:"dashboard",init:function(){var b=this;return wphbDashboardStrings&&(b.strings=wphbDashboardStrings),a(".box-dashboard-welcome .close").click(function(){a.ajax({url:ajaxurl,method:"POST",data:{action:"wphb_ajax",wphb_nonce:b.strings.removeWelcomeBoxNonce,nonce_name:"wphb-remove-welcome-box",module:b.module,module_action:"remove_welcome_box"}})}),a("#wphb-activate-minification").change(function(){var c=a(this).val();a.ajax({url:ajaxurl,method:"POST",data:{action:"wphb_ajax",wphb_nonce:b.strings.activateMinificationNonce,nonce_name:"wphb-activate-minification",module:b.module,module_action:"activate_network_minification",data:{value:c}}}).done(function(){var b=a("#wphb-notice-minification-settings-updated");b.slideDown(),setTimeout(function(){b.slideUp()},5e3)})}),a(".wphb-performance-report-item").click(function(b){var c=a(this).data("performance-url");c&&(location.href=c)}),this}}}(jQuery),function(a){WPHB_Admin.uptime={module:"uptime",$dataRangeSelector:null,chartData:null,timer:null,$spinner:null,init:function(){this.$spinner=a(".spinner"),this.strings=wphbUptimeStrings,this.$dataRangeSelector=a("#wphb-uptime-data-range"),this.chartData=a("#uptime-chart-json").val(),this.$disableUptime=a("#wphb-disable-uptime"),this.$dataRangeSelector.change(function(){window.location.href=a(this).find(":selected").data("url")});var b=this;this.$disableUptime.change(function(){b.$spinner.css("visibility","visible");var c=a(this).is(":checked");c&&b.timer?(clearTimeout(b.timer),b.$spinner.css("visibility","hidden")):b.timer=setTimeout(function(){location.href=b.strings.disableUptimeURL},3e3)}),this.drawChart(),a("#uptime-re-check-status").on("click",function(a){a.preventDefault(),location.reload()})},drawChart:function(){var b=new google.visualization.DataTable;b.addColumn("datetime","Day"),b.addColumn("number","Response Time (ms)");for(var c=JSON.parse(this.chartData),d=0;d<c.length;d++)c[d][0]=new Date(c[d][0]);b.addRows(c);var e={legend:{position:"none"},vAxis:{format:"short"},hAxis:{textPosition:"none"},tooltip:{isHtml:!0},series:{0:{axis:"Resp"}},axes:{y:{Resp:{label:"Response Time (ms)"}}}},f=new google.charts.Line(document.getElementById("uptime-chart"));f.draw(b,e),a(window).resize(function(){f.draw(b,e)})}}}(jQuery),jQuery(document).ready(function(){WPHB_Admin.init()});
//# sourceMappingURL=../../../sourceMap.map